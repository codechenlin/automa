"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/siwe@2.3.2_ethers@6.16.0";
exports.ids = ["vendor-chunks/siwe@2.3.2_ethers@6.16.0"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/client.js":
/*!******************************************************************************************!*\
  !*** ../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/client.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SiweMessage = void 0;\n// TODO: Figure out how to get types from this lib:\nconst siwe_parser_1 = __webpack_require__(/*! @spruceid/siwe-parser */ \"(rsc)/../../node_modules/.pnpm/@spruceid+siwe-parser@2.1.2/node_modules/@spruceid/siwe-parser/dist/parsers.js\");\nconst uri = __importStar(__webpack_require__(/*! valid-url */ \"(rsc)/../../node_modules/.pnpm/valid-url@1.0.9/node_modules/valid-url/index.js\"));\nconst ethersCompat_1 = __webpack_require__(/*! ./ethersCompat */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/ethersCompat.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/types.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/utils.js\");\nclass SiweMessage {\n    /**\n     * Creates a parsed Sign-In with Ethereum Message (EIP-4361) object from a\n     * string or an object. If a string is used an ABNF parser is called to\n     * validate the parameter, otherwise the fields are attributed.\n     * @param param {string | SiweMessage} Sign message as a string or an object.\n     */\n    constructor(param) {\n        if (typeof param === 'string') {\n            const parsedMessage = new siwe_parser_1.ParsedMessage(param);\n            this.scheme = parsedMessage.scheme;\n            this.domain = parsedMessage.domain;\n            this.address = parsedMessage.address;\n            this.statement = parsedMessage.statement;\n            this.uri = parsedMessage.uri;\n            this.version = parsedMessage.version;\n            this.nonce = parsedMessage.nonce;\n            this.issuedAt = parsedMessage.issuedAt;\n            this.expirationTime = parsedMessage.expirationTime;\n            this.notBefore = parsedMessage.notBefore;\n            this.requestId = parsedMessage.requestId;\n            this.chainId = parsedMessage.chainId;\n            this.resources = parsedMessage.resources;\n        }\n        else {\n            this.scheme = param === null || param === void 0 ? void 0 : param.scheme;\n            this.domain = param.domain;\n            this.address = param.address;\n            this.statement = param === null || param === void 0 ? void 0 : param.statement;\n            this.uri = param.uri;\n            this.version = param.version;\n            this.chainId = param.chainId;\n            this.nonce = param.nonce;\n            this.issuedAt = param === null || param === void 0 ? void 0 : param.issuedAt;\n            this.expirationTime = param === null || param === void 0 ? void 0 : param.expirationTime;\n            this.notBefore = param === null || param === void 0 ? void 0 : param.notBefore;\n            this.requestId = param === null || param === void 0 ? void 0 : param.requestId;\n            this.resources = param === null || param === void 0 ? void 0 : param.resources;\n            if (typeof this.chainId === 'string') {\n                this.chainId = (0, siwe_parser_1.parseIntegerNumber)(this.chainId);\n            }\n        }\n        this.nonce = this.nonce || (0, utils_1.generateNonce)();\n        this.validateMessage();\n    }\n    /**\n     * This function can be used to retrieve an EIP-4361 formated message for\n     * signature, although you can call it directly it's advised to use\n     * [prepareMessage()] instead which will resolve to the correct method based\n     * on the [type] attribute of this object, in case of other formats being\n     * implemented.\n     * @returns {string} EIP-4361 formated message, ready for EIP-191 signing.\n     */\n    toMessage() {\n        /** Validates all fields of the object */\n        this.validateMessage();\n        const headerPrefx = this.scheme ? `${this.scheme}://${this.domain}` : this.domain;\n        const header = `${headerPrefx} wants you to sign in with your Ethereum account:`;\n        const uriField = `URI: ${this.uri}`;\n        let prefix = [header, this.address].join('\\n');\n        const versionField = `Version: ${this.version}`;\n        if (!this.nonce) {\n            this.nonce = (0, utils_1.generateNonce)();\n        }\n        const chainField = `Chain ID: ` + this.chainId || 0;\n        const nonceField = `Nonce: ${this.nonce}`;\n        const suffixArray = [uriField, versionField, chainField, nonceField];\n        this.issuedAt = this.issuedAt || new Date().toISOString();\n        suffixArray.push(`Issued At: ${this.issuedAt}`);\n        if (this.expirationTime) {\n            const expiryField = `Expiration Time: ${this.expirationTime}`;\n            suffixArray.push(expiryField);\n        }\n        if (this.notBefore) {\n            suffixArray.push(`Not Before: ${this.notBefore}`);\n        }\n        if (this.requestId) {\n            suffixArray.push(`Request ID: ${this.requestId}`);\n        }\n        if (this.resources) {\n            suffixArray.push([`Resources:`, ...this.resources.map(x => `- ${x}`)].join('\\n'));\n        }\n        const suffix = suffixArray.join('\\n');\n        prefix = [prefix, this.statement].join('\\n\\n');\n        if (this.statement) {\n            prefix += '\\n';\n        }\n        return [prefix, suffix].join('\\n');\n    }\n    /**\n     * This method parses all the fields in the object and creates a messaging for signing\n     * message according with the type defined.\n     * @returns {string} Returns a message ready to be signed according with the\n     * type defined in the object.\n     */\n    prepareMessage() {\n        let message;\n        switch (this.version) {\n            case '1': {\n                message = this.toMessage();\n                break;\n            }\n            default: {\n                message = this.toMessage();\n                break;\n            }\n        }\n        return message;\n    }\n    /**\n     * @deprecated\n     * Verifies the integrity of the object by matching its signature.\n     * @param signature Signature to match the address in the message.\n     * @param provider Ethers provider to be used for EIP-1271 validation\n     */\n    validate(signature, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.warn('validate() has been deprecated, please update your code to use verify(). validate() may be removed in future versions.');\n            return this.verify({ signature }, { provider, suppressExceptions: false })\n                .then(({ data }) => data)\n                .catch(({ error }) => {\n                throw error;\n            });\n        });\n    }\n    /**\n     * Verifies the integrity of the object by matching its signature.\n     * @param params Parameters to verify the integrity of the message, signature is required.\n     * @returns {Promise<SiweMessage>} This object if valid.\n     */\n    verify(params, opts = { suppressExceptions: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                var _a, _b, _c;\n                const fail = result => {\n                    if (opts.suppressExceptions) {\n                        return resolve(result);\n                    }\n                    else {\n                        return reject(result);\n                    }\n                };\n                const invalidParams = (0, utils_1.checkInvalidKeys)(params, types_1.VerifyParamsKeys);\n                if (invalidParams.length > 0) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: new Error(`${invalidParams.join(', ')} is/are not valid key(s) for VerifyParams.`),\n                    });\n                }\n                const invalidOpts = (0, utils_1.checkInvalidKeys)(opts, types_1.VerifyOptsKeys);\n                if (invalidParams.length > 0) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: new Error(`${invalidOpts.join(', ')} is/are not valid key(s) for VerifyOpts.`),\n                    });\n                }\n                const { signature, scheme, domain, nonce, time } = params;\n                /** Scheme for domain binding */\n                if (scheme && scheme !== this.scheme) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: new types_1.SiweError(types_1.SiweErrorType.SCHEME_MISMATCH, scheme, this.scheme),\n                    });\n                }\n                /** Domain binding */\n                if (domain && domain !== this.domain) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: new types_1.SiweError(types_1.SiweErrorType.DOMAIN_MISMATCH, domain, this.domain),\n                    });\n                }\n                /** Nonce binding */\n                if (nonce && nonce !== this.nonce) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: new types_1.SiweError(types_1.SiweErrorType.NONCE_MISMATCH, nonce, this.nonce),\n                    });\n                }\n                /** Check time or now */\n                const checkTime = new Date(time || new Date());\n                /** Message not expired */\n                if (this.expirationTime) {\n                    const expirationDate = new Date(this.expirationTime);\n                    if (checkTime.getTime() >= expirationDate.getTime()) {\n                        fail({\n                            success: false,\n                            data: this,\n                            error: new types_1.SiweError(types_1.SiweErrorType.EXPIRED_MESSAGE, `${checkTime.toISOString()} < ${expirationDate.toISOString()}`, `${checkTime.toISOString()} >= ${expirationDate.toISOString()}`),\n                        });\n                    }\n                }\n                /** Message is valid already */\n                if (this.notBefore) {\n                    const notBefore = new Date(this.notBefore);\n                    if (checkTime.getTime() < notBefore.getTime()) {\n                        fail({\n                            success: false,\n                            data: this,\n                            error: new types_1.SiweError(types_1.SiweErrorType.NOT_YET_VALID_MESSAGE, `${checkTime.toISOString()} >= ${notBefore.toISOString()}`, `${checkTime.toISOString()} < ${notBefore.toISOString()}`),\n                        });\n                    }\n                }\n                let EIP4361Message;\n                try {\n                    EIP4361Message = this.prepareMessage();\n                }\n                catch (e) {\n                    fail({\n                        success: false,\n                        data: this,\n                        error: e,\n                    });\n                }\n                /** Recover address from signature */\n                let addr;\n                try {\n                    addr = (0, ethersCompat_1.verifyMessage)(EIP4361Message, signature);\n                }\n                catch (e) {\n                    console.error(e);\n                }\n                /** Match signature with message's address */\n                if (addr === this.address) {\n                    return resolve({\n                        success: true,\n                        data: this,\n                    });\n                }\n                else {\n                    const EIP1271Promise = (0, utils_1.checkContractWalletSignature)(this, signature, opts.provider)\n                        .then(isValid => {\n                        if (!isValid) {\n                            return {\n                                success: false,\n                                data: this,\n                                error: new types_1.SiweError(types_1.SiweErrorType.INVALID_SIGNATURE, addr, `Resolved address to be ${this.address}`),\n                            };\n                        }\n                        return {\n                            success: true,\n                            data: this,\n                        };\n                    })\n                        .catch(error => {\n                        return {\n                            success: false,\n                            data: this,\n                            error,\n                        };\n                    });\n                    Promise.all([\n                        EIP1271Promise,\n                        (_c = (_b = (_a = opts === null || opts === void 0 ? void 0 : opts.verificationFallback) === null || _a === void 0 ? void 0 : _a.call(opts, params, opts, this, EIP1271Promise)) === null || _b === void 0 ? void 0 : _b.then(res => res)) === null || _c === void 0 ? void 0 : _c.catch((res) => res),\n                    ]).then(([EIP1271Response, fallbackResponse]) => {\n                        if (fallbackResponse) {\n                            if (fallbackResponse.success) {\n                                return resolve(fallbackResponse);\n                            }\n                            else {\n                                fail(fallbackResponse);\n                            }\n                        }\n                        else {\n                            if (EIP1271Response.success) {\n                                return resolve(EIP1271Response);\n                            }\n                            else {\n                                fail(EIP1271Response);\n                            }\n                        }\n                    });\n                }\n            });\n        });\n    }\n    /**\n     * Validates the values of this object fields.\n     * @throws Throws an {ErrorType} if a field is invalid.\n     */\n    validateMessage(...args) {\n        var _a;\n        /** Checks if the user might be using the function to verify instead of validate. */\n        if (args.length > 0) {\n            throw new types_1.SiweError(types_1.SiweErrorType.UNABLE_TO_PARSE, `Unexpected argument in the validateMessage function.`);\n        }\n        /** `domain` check. */\n        if (!this.domain ||\n            this.domain.length === 0 ||\n            !/[^#?]*/.test(this.domain)) {\n            throw new types_1.SiweError(types_1.SiweErrorType.INVALID_DOMAIN, `${this.domain} to be a valid domain.`);\n        }\n        /** EIP-55 `address` check. */\n        if (!(0, siwe_parser_1.isEIP55Address)(this.address)) {\n            throw new types_1.SiweError(types_1.SiweErrorType.INVALID_ADDRESS, (0, ethersCompat_1.getAddress)(this.address), this.address);\n        }\n        /** Check if the URI is valid. */\n        if (!uri.isUri(this.uri)) {\n            throw new types_1.SiweError(types_1.SiweErrorType.INVALID_URI, `${this.uri} to be a valid uri.`);\n        }\n        /** Check if the version is 1. */\n        if (this.version !== '1') {\n            throw new types_1.SiweError(types_1.SiweErrorType.INVALID_MESSAGE_VERSION, '1', this.version);\n        }\n        /** Check if the nonce is alphanumeric and bigger then 8 characters */\n        const nonce = (_a = this === null || this === void 0 ? void 0 : this.nonce) === null || _a === void 0 ? void 0 : _a.match(/[a-zA-Z0-9]{8,}/);\n        if (!nonce || this.nonce.length < 8 || nonce[0] !== this.nonce) {\n            throw new types_1.SiweError(types_1.SiweErrorType.INVALID_NONCE, `Length > 8 (${nonce.length}). Alphanumeric.`, this.nonce);\n        }\n        /** `issuedAt` conforms to ISO-8601 and is a valid date. */\n        if (this.issuedAt) {\n            if (!(0, utils_1.isValidISO8601Date)(this.issuedAt)) {\n                throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT);\n            }\n        }\n        /** `expirationTime` conforms to ISO-8601 and is a valid date. */\n        if (this.expirationTime) {\n            if (!(0, utils_1.isValidISO8601Date)(this.expirationTime)) {\n                throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT);\n            }\n        }\n        /** `notBefore` conforms to ISO-8601 and is a valid date. */\n        if (this.notBefore) {\n            if (!(0, utils_1.isValidISO8601Date)(this.notBefore)) {\n                throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT);\n            }\n        }\n    }\n}\nexports.SiweMessage = SiweMessage;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMENBQTBDLDRCQUE0QjtBQUN0RSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQjtBQUNuQjtBQUNBLHNCQUFzQixtQkFBTyxDQUFDLDRJQUF1QjtBQUNyRCx5QkFBeUIsbUJBQU8sQ0FBQyxpR0FBVztBQUM1Qyx1QkFBdUIsbUJBQU8sQ0FBQyxzSEFBZ0I7QUFDL0MsZ0JBQWdCLG1CQUFPLENBQUMsd0dBQVM7QUFDakMsZ0JBQWdCLG1CQUFPLENBQUMsd0dBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsWUFBWSxLQUFLLFlBQVk7QUFDMUUsMEJBQTBCLGFBQWE7QUFDdkMsaUNBQWlDLFNBQVM7QUFDMUM7QUFDQSx5Q0FBeUMsYUFBYTtBQUN0RDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsQ0FBRztBQUM3RCxxQ0FBcUMsV0FBVztBQUNoRDtBQUNBO0FBQ0EsdUNBQXVDLGNBQWM7QUFDckQ7QUFDQSxvREFBb0Qsb0JBQW9CO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxlQUFlO0FBQzNEO0FBQ0E7QUFDQSw0Q0FBNEMsZUFBZTtBQUMzRDtBQUNBO0FBQ0EsNEVBQTRFLEVBQUU7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFdBQVcsSUFBSSxxQ0FBcUM7QUFDckYseUJBQXlCLE1BQU07QUFDL0IsMEJBQTBCLE9BQU87QUFDakM7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMEJBQTBCO0FBQ3RFLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0JBQXdCO0FBQ3BFLHFCQUFxQjtBQUNyQjtBQUNBLHdCQUF3Qix5Q0FBeUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLHlCQUF5QixJQUFJLDZCQUE2QixNQUFNLHlCQUF5QixLQUFLLDZCQUE2QjtBQUM5Tix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUdBQXlHLHlCQUF5QixLQUFLLHdCQUF3QixNQUFNLHlCQUF5QixJQUFJLHdCQUF3QjtBQUMxTix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSUFBc0ksYUFBYTtBQUNuSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsYUFBYTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxVQUFVO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtJQUErSSxHQUFHO0FBQ2xKO0FBQ0EsNEZBQTRGLGFBQWE7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvbndheS9hdXRvbWF0b24tZGFzaGJvYXJkLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zaXdlQDIuMy4yX2V0aGVyc0A2LjE2LjAvbm9kZV9tb2R1bGVzL3Npd2UvZGlzdC9jbGllbnQuanM/NGIxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNpd2VNZXNzYWdlID0gdm9pZCAwO1xuLy8gVE9ETzogRmlndXJlIG91dCBob3cgdG8gZ2V0IHR5cGVzIGZyb20gdGhpcyBsaWI6XG5jb25zdCBzaXdlX3BhcnNlcl8xID0gcmVxdWlyZShcIkBzcHJ1Y2VpZC9zaXdlLXBhcnNlclwiKTtcbmNvbnN0IHVyaSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwidmFsaWQtdXJsXCIpKTtcbmNvbnN0IGV0aGVyc0NvbXBhdF8xID0gcmVxdWlyZShcIi4vZXRoZXJzQ29tcGF0XCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY2xhc3MgU2l3ZU1lc3NhZ2Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwYXJzZWQgU2lnbi1JbiB3aXRoIEV0aGVyZXVtIE1lc3NhZ2UgKEVJUC00MzYxKSBvYmplY3QgZnJvbSBhXG4gICAgICogc3RyaW5nIG9yIGFuIG9iamVjdC4gSWYgYSBzdHJpbmcgaXMgdXNlZCBhbiBBQk5GIHBhcnNlciBpcyBjYWxsZWQgdG9cbiAgICAgKiB2YWxpZGF0ZSB0aGUgcGFyYW1ldGVyLCBvdGhlcndpc2UgdGhlIGZpZWxkcyBhcmUgYXR0cmlidXRlZC5cbiAgICAgKiBAcGFyYW0gcGFyYW0ge3N0cmluZyB8IFNpd2VNZXNzYWdlfSBTaWduIG1lc3NhZ2UgYXMgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRNZXNzYWdlID0gbmV3IHNpd2VfcGFyc2VyXzEuUGFyc2VkTWVzc2FnZShwYXJhbSk7XG4gICAgICAgICAgICB0aGlzLnNjaGVtZSA9IHBhcnNlZE1lc3NhZ2Uuc2NoZW1lO1xuICAgICAgICAgICAgdGhpcy5kb21haW4gPSBwYXJzZWRNZXNzYWdlLmRvbWFpbjtcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzcyA9IHBhcnNlZE1lc3NhZ2UuYWRkcmVzcztcbiAgICAgICAgICAgIHRoaXMuc3RhdGVtZW50ID0gcGFyc2VkTWVzc2FnZS5zdGF0ZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnVyaSA9IHBhcnNlZE1lc3NhZ2UudXJpO1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gcGFyc2VkTWVzc2FnZS52ZXJzaW9uO1xuICAgICAgICAgICAgdGhpcy5ub25jZSA9IHBhcnNlZE1lc3NhZ2Uubm9uY2U7XG4gICAgICAgICAgICB0aGlzLmlzc3VlZEF0ID0gcGFyc2VkTWVzc2FnZS5pc3N1ZWRBdDtcbiAgICAgICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBwYXJzZWRNZXNzYWdlLmV4cGlyYXRpb25UaW1lO1xuICAgICAgICAgICAgdGhpcy5ub3RCZWZvcmUgPSBwYXJzZWRNZXNzYWdlLm5vdEJlZm9yZTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdElkID0gcGFyc2VkTWVzc2FnZS5yZXF1ZXN0SWQ7XG4gICAgICAgICAgICB0aGlzLmNoYWluSWQgPSBwYXJzZWRNZXNzYWdlLmNoYWluSWQ7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlcyA9IHBhcnNlZE1lc3NhZ2UucmVzb3VyY2VzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zY2hlbWUgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0uc2NoZW1lO1xuICAgICAgICAgICAgdGhpcy5kb21haW4gPSBwYXJhbS5kb21haW47XG4gICAgICAgICAgICB0aGlzLmFkZHJlc3MgPSBwYXJhbS5hZGRyZXNzO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZW1lbnQgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0uc3RhdGVtZW50O1xuICAgICAgICAgICAgdGhpcy51cmkgPSBwYXJhbS51cmk7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gPSBwYXJhbS52ZXJzaW9uO1xuICAgICAgICAgICAgdGhpcy5jaGFpbklkID0gcGFyYW0uY2hhaW5JZDtcbiAgICAgICAgICAgIHRoaXMubm9uY2UgPSBwYXJhbS5ub25jZTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVkQXQgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0uaXNzdWVkQXQ7XG4gICAgICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gcGFyYW0gPT09IG51bGwgfHwgcGFyYW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtLmV4cGlyYXRpb25UaW1lO1xuICAgICAgICAgICAgdGhpcy5ub3RCZWZvcmUgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0ubm90QmVmb3JlO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0ucmVxdWVzdElkO1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSBwYXJhbSA9PT0gbnVsbCB8fCBwYXJhbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW0ucmVzb3VyY2VzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNoYWluSWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFpbklkID0gKDAsIHNpd2VfcGFyc2VyXzEucGFyc2VJbnRlZ2VyTnVtYmVyKSh0aGlzLmNoYWluSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9uY2UgPSB0aGlzLm5vbmNlIHx8ICgwLCB1dGlsc18xLmdlbmVyYXRlTm9uY2UpKCk7XG4gICAgICAgIHRoaXMudmFsaWRhdGVNZXNzYWdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgYW4gRUlQLTQzNjEgZm9ybWF0ZWQgbWVzc2FnZSBmb3JcbiAgICAgKiBzaWduYXR1cmUsIGFsdGhvdWdoIHlvdSBjYW4gY2FsbCBpdCBkaXJlY3RseSBpdCdzIGFkdmlzZWQgdG8gdXNlXG4gICAgICogW3ByZXBhcmVNZXNzYWdlKCldIGluc3RlYWQgd2hpY2ggd2lsbCByZXNvbHZlIHRvIHRoZSBjb3JyZWN0IG1ldGhvZCBiYXNlZFxuICAgICAqIG9uIHRoZSBbdHlwZV0gYXR0cmlidXRlIG9mIHRoaXMgb2JqZWN0LCBpbiBjYXNlIG9mIG90aGVyIGZvcm1hdHMgYmVpbmdcbiAgICAgKiBpbXBsZW1lbnRlZC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBFSVAtNDM2MSBmb3JtYXRlZCBtZXNzYWdlLCByZWFkeSBmb3IgRUlQLTE5MSBzaWduaW5nLlxuICAgICAqL1xuICAgIHRvTWVzc2FnZSgpIHtcbiAgICAgICAgLyoqIFZhbGlkYXRlcyBhbGwgZmllbGRzIG9mIHRoZSBvYmplY3QgKi9cbiAgICAgICAgdGhpcy52YWxpZGF0ZU1lc3NhZ2UoKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUHJlZnggPSB0aGlzLnNjaGVtZSA/IGAke3RoaXMuc2NoZW1lfTovLyR7dGhpcy5kb21haW59YCA6IHRoaXMuZG9tYWluO1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBgJHtoZWFkZXJQcmVmeH0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6YDtcbiAgICAgICAgY29uc3QgdXJpRmllbGQgPSBgVVJJOiAke3RoaXMudXJpfWA7XG4gICAgICAgIGxldCBwcmVmaXggPSBbaGVhZGVyLCB0aGlzLmFkZHJlc3NdLmpvaW4oJ1xcbicpO1xuICAgICAgICBjb25zdCB2ZXJzaW9uRmllbGQgPSBgVmVyc2lvbjogJHt0aGlzLnZlcnNpb259YDtcbiAgICAgICAgaWYgKCF0aGlzLm5vbmNlKSB7XG4gICAgICAgICAgICB0aGlzLm5vbmNlID0gKDAsIHV0aWxzXzEuZ2VuZXJhdGVOb25jZSkoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGFpbkZpZWxkID0gYENoYWluIElEOiBgICsgdGhpcy5jaGFpbklkIHx8ICcxJztcbiAgICAgICAgY29uc3Qgbm9uY2VGaWVsZCA9IGBOb25jZTogJHt0aGlzLm5vbmNlfWA7XG4gICAgICAgIGNvbnN0IHN1ZmZpeEFycmF5ID0gW3VyaUZpZWxkLCB2ZXJzaW9uRmllbGQsIGNoYWluRmllbGQsIG5vbmNlRmllbGRdO1xuICAgICAgICB0aGlzLmlzc3VlZEF0ID0gdGhpcy5pc3N1ZWRBdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHN1ZmZpeEFycmF5LnB1c2goYElzc3VlZCBBdDogJHt0aGlzLmlzc3VlZEF0fWApO1xuICAgICAgICBpZiAodGhpcy5leHBpcmF0aW9uVGltZSkge1xuICAgICAgICAgICAgY29uc3QgZXhwaXJ5RmllbGQgPSBgRXhwaXJhdGlvbiBUaW1lOiAke3RoaXMuZXhwaXJhdGlvblRpbWV9YDtcbiAgICAgICAgICAgIHN1ZmZpeEFycmF5LnB1c2goZXhwaXJ5RmllbGQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vdEJlZm9yZSkge1xuICAgICAgICAgICAgc3VmZml4QXJyYXkucHVzaChgTm90IEJlZm9yZTogJHt0aGlzLm5vdEJlZm9yZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHN1ZmZpeEFycmF5LnB1c2goYFJlcXVlc3QgSUQ6ICR7dGhpcy5yZXF1ZXN0SWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBzdWZmaXhBcnJheS5wdXNoKFtgUmVzb3VyY2VzOmAsIC4uLnRoaXMucmVzb3VyY2VzLm1hcCh4ID0+IGAtICR7eH1gKV0uam9pbignXFxuJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1ZmZpeCA9IHN1ZmZpeEFycmF5LmpvaW4oJ1xcbicpO1xuICAgICAgICBwcmVmaXggPSBbcHJlZml4LCB0aGlzLnN0YXRlbWVudF0uam9pbignXFxuXFxuJyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlbWVudCkge1xuICAgICAgICAgICAgcHJlZml4ICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcHJlZml4LCBzdWZmaXhdLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBwYXJzZXMgYWxsIHRoZSBmaWVsZHMgaW4gdGhlIG9iamVjdCBhbmQgY3JlYXRlcyBhIG1lc3NhZ2luZyBmb3Igc2lnbmluZ1xuICAgICAqIG1lc3NhZ2UgYWNjb3JkaW5nIHdpdGggdGhlIHR5cGUgZGVmaW5lZC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIGEgbWVzc2FnZSByZWFkeSB0byBiZSBzaWduZWQgYWNjb3JkaW5nIHdpdGggdGhlXG4gICAgICogdHlwZSBkZWZpbmVkIGluIHRoZSBvYmplY3QuXG4gICAgICovXG4gICAgcHJlcGFyZU1lc3NhZ2UoKSB7XG4gICAgICAgIGxldCBtZXNzYWdlO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudmVyc2lvbikge1xuICAgICAgICAgICAgY2FzZSAnMSc6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy50b01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy50b01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBWZXJpZmllcyB0aGUgaW50ZWdyaXR5IG9mIHRoZSBvYmplY3QgYnkgbWF0Y2hpbmcgaXRzIHNpZ25hdHVyZS5cbiAgICAgKiBAcGFyYW0gc2lnbmF0dXJlIFNpZ25hdHVyZSB0byBtYXRjaCB0aGUgYWRkcmVzcyBpbiB0aGUgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRXRoZXJzIHByb3ZpZGVyIHRvIGJlIHVzZWQgZm9yIEVJUC0xMjcxIHZhbGlkYXRpb25cbiAgICAgKi9cbiAgICB2YWxpZGF0ZShzaWduYXR1cmUsIHByb3ZpZGVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3ZhbGlkYXRlKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVwZGF0ZSB5b3VyIGNvZGUgdG8gdXNlIHZlcmlmeSgpLiB2YWxpZGF0ZSgpIG1heSBiZSByZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucy4nKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcmlmeSh7IHNpZ25hdHVyZSB9LCB7IHByb3ZpZGVyLCBzdXBwcmVzc0V4Y2VwdGlvbnM6IGZhbHNlIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiBkYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoeyBlcnJvciB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIG9iamVjdCBieSBtYXRjaGluZyBpdHMgc2lnbmF0dXJlLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyB0byB2ZXJpZnkgdGhlIGludGVncml0eSBvZiB0aGUgbWVzc2FnZSwgc2lnbmF0dXJlIGlzIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFNpd2VNZXNzYWdlPn0gVGhpcyBvYmplY3QgaWYgdmFsaWQuXG4gICAgICovXG4gICAgdmVyaWZ5KHBhcmFtcywgb3B0cyA9IHsgc3VwcHJlc3NFeGNlcHRpb25zOiBmYWxzZSB9KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhaWwgPSByZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5zdXBwcmVzc0V4Y2VwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRQYXJhbXMgPSAoMCwgdXRpbHNfMS5jaGVja0ludmFsaWRLZXlzKShwYXJhbXMsIHR5cGVzXzEuVmVyaWZ5UGFyYW1zS2V5cyk7XG4gICAgICAgICAgICAgICAgaWYgKGludmFsaWRQYXJhbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmYWlsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgRXJyb3IoYCR7aW52YWxpZFBhcmFtcy5qb2luKCcsICcpfSBpcy9hcmUgbm90IHZhbGlkIGtleShzKSBmb3IgVmVyaWZ5UGFyYW1zLmApLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZE9wdHMgPSAoMCwgdXRpbHNfMS5jaGVja0ludmFsaWRLZXlzKShvcHRzLCB0eXBlc18xLlZlcmlmeU9wdHNLZXlzKTtcbiAgICAgICAgICAgICAgICBpZiAoaW52YWxpZFBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhaWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgJHtpbnZhbGlkT3B0cy5qb2luKCcsICcpfSBpcy9hcmUgbm90IHZhbGlkIGtleShzKSBmb3IgVmVyaWZ5T3B0cy5gKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2lnbmF0dXJlLCBzY2hlbWUsIGRvbWFpbiwgbm9uY2UsIHRpbWUgfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAvKiogU2NoZW1lIGZvciBkb21haW4gYmluZGluZyAqL1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWUgJiYgc2NoZW1lICE9PSB0aGlzLnNjaGVtZSkge1xuICAgICAgICAgICAgICAgICAgICBmYWlsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgdHlwZXNfMS5TaXdlRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLlNDSEVNRV9NSVNNQVRDSCwgc2NoZW1lLCB0aGlzLnNjaGVtZSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiogRG9tYWluIGJpbmRpbmcgKi9cbiAgICAgICAgICAgICAgICBpZiAoZG9tYWluICYmIGRvbWFpbiAhPT0gdGhpcy5kb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5ET01BSU5fTUlTTUFUQ0gsIGRvbWFpbiwgdGhpcy5kb21haW4pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIE5vbmNlIGJpbmRpbmcgKi9cbiAgICAgICAgICAgICAgICBpZiAobm9uY2UgJiYgbm9uY2UgIT09IHRoaXMubm9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5OT05DRV9NSVNNQVRDSCwgbm9uY2UsIHRoaXMubm9uY2UpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIENoZWNrIHRpbWUgb3Igbm93ICovXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tUaW1lID0gbmV3IERhdGUodGltZSB8fCBuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAvKiogTWVzc2FnZSBub3QgZXhwaXJlZCAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cGlyYXRpb25UaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUodGhpcy5leHBpcmF0aW9uVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1RpbWUuZ2V0VGltZSgpID49IGV4cGlyYXRpb25EYXRlLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5FWFBJUkVEX01FU1NBR0UsIGAke2NoZWNrVGltZS50b0lTT1N0cmluZygpfSA8ICR7ZXhwaXJhdGlvbkRhdGUudG9JU09TdHJpbmcoKX1gLCBgJHtjaGVja1RpbWUudG9JU09TdHJpbmcoKX0gPj0gJHtleHBpcmF0aW9uRGF0ZS50b0lTT1N0cmluZygpfWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIE1lc3NhZ2UgaXMgdmFsaWQgYWxyZWFkeSAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdEJlZm9yZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RCZWZvcmUgPSBuZXcgRGF0ZSh0aGlzLm5vdEJlZm9yZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1RpbWUuZ2V0VGltZSgpIDwgbm90QmVmb3JlLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5OT1RfWUVUX1ZBTElEX01FU1NBR0UsIGAke2NoZWNrVGltZS50b0lTT1N0cmluZygpfSA+PSAke25vdEJlZm9yZS50b0lTT1N0cmluZygpfWAsIGAke2NoZWNrVGltZS50b0lTT1N0cmluZygpfSA8ICR7bm90QmVmb3JlLnRvSVNPU3RyaW5nKCl9YCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgRUlQNDM2MU1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgRUlQNDM2MU1lc3NhZ2UgPSB0aGlzLnByZXBhcmVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhaWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiogUmVjb3ZlciBhZGRyZXNzIGZyb20gc2lnbmF0dXJlICovXG4gICAgICAgICAgICAgICAgbGV0IGFkZHI7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkciA9ICgwLCBldGhlcnNDb21wYXRfMS52ZXJpZnlNZXNzYWdlKShFSVA0MzYxTWVzc2FnZSwgc2lnbmF0dXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIE1hdGNoIHNpZ25hdHVyZSB3aXRoIG1lc3NhZ2UncyBhZGRyZXNzICovXG4gICAgICAgICAgICAgICAgaWYgKGFkZHIgPT09IHRoaXMuYWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBFSVAxMjcxUHJvbWlzZSA9ICgwLCB1dGlsc18xLmNoZWNrQ29udHJhY3RXYWxsZXRTaWduYXR1cmUpKHRoaXMsIHNpZ25hdHVyZSwgb3B0cy5wcm92aWRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGlzVmFsaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgdHlwZXNfMS5TaXdlRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLklOVkFMSURfU0lHTkFUVVJFLCBhZGRyLCBgUmVzb2x2ZWQgYWRkcmVzcyB0byBiZSAke3RoaXMuYWRkcmVzc31gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICBFSVAxMjcxUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYyA9IChfYiA9IChfYSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy52ZXJpZmljYXRpb25GYWxsYmFjaykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwob3B0cywgcGFyYW1zLCBvcHRzLCB0aGlzLCBFSVAxMjcxUHJvbWlzZSkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50aGVuKHJlcyA9PiByZXMpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2F0Y2goKHJlcykgPT4gcmVzKSxcbiAgICAgICAgICAgICAgICAgICAgXSkudGhlbigoW0VJUDEyNzFSZXNwb25zZSwgZmFsbGJhY2tSZXNwb25zZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxsYmFja1Jlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoZmFsbGJhY2tSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEVJUDEyNzFSZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKEVJUDEyNzFSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKEVJUDEyNzFSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgdmFsdWVzIG9mIHRoaXMgb2JqZWN0IGZpZWxkcy5cbiAgICAgKiBAdGhyb3dzIFRocm93cyBhbiB7RXJyb3JUeXBlfSBpZiBhIGZpZWxkIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgdmFsaWRhdGVNZXNzYWdlKC4uLmFyZ3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKiogQ2hlY2tzIGlmIHRoZSB1c2VyIG1pZ2h0IGJlIHVzaW5nIHRoZSBmdW5jdGlvbiB0byB2ZXJpZnkgaW5zdGVhZCBvZiB2YWxpZGF0ZS4gKi9cbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5VTkFCTEVfVE9fUEFSU0UsIGBVbmV4cGVjdGVkIGFyZ3VtZW50IGluIHRoZSB2YWxpZGF0ZU1lc3NhZ2UgZnVuY3Rpb24uYCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIGBkb21haW5gIGNoZWNrLiAqL1xuICAgICAgICBpZiAoIXRoaXMuZG9tYWluIHx8XG4gICAgICAgICAgICB0aGlzLmRvbWFpbi5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICEvW14jP10qLy50ZXN0KHRoaXMuZG9tYWluKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5JTlZBTElEX0RPTUFJTiwgYCR7dGhpcy5kb21haW59IHRvIGJlIGEgdmFsaWQgZG9tYWluLmApO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBFSVAtNTUgYGFkZHJlc3NgIGNoZWNrLiAqL1xuICAgICAgICBpZiAoISgwLCBzaXdlX3BhcnNlcl8xLmlzRUlQNTVBZGRyZXNzKSh0aGlzLmFkZHJlc3MpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgdHlwZXNfMS5TaXdlRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLklOVkFMSURfQUREUkVTUywgKDAsIGV0aGVyc0NvbXBhdF8xLmdldEFkZHJlc3MpKHRoaXMuYWRkcmVzcyksIHRoaXMuYWRkcmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIENoZWNrIGlmIHRoZSBVUkkgaXMgdmFsaWQuICovXG4gICAgICAgIGlmICghdXJpLmlzVXJpKHRoaXMudXJpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5JTlZBTElEX1VSSSwgYCR7dGhpcy51cml9IHRvIGJlIGEgdmFsaWQgdXJpLmApO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBDaGVjayBpZiB0aGUgdmVyc2lvbiBpcyAxLiAqL1xuICAgICAgICBpZiAodGhpcy52ZXJzaW9uICE9PSAnMScpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLlNpd2VFcnJvcih0eXBlc18xLlNpd2VFcnJvclR5cGUuSU5WQUxJRF9NRVNTQUdFX1ZFUlNJT04sICcxJywgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQ2hlY2sgaWYgdGhlIG5vbmNlIGlzIGFscGhhbnVtZXJpYyBhbmQgYmlnZ2VyIHRoZW4gOCBjaGFyYWN0ZXJzICovXG4gICAgICAgIGNvbnN0IG5vbmNlID0gKF9hID0gdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aGlzLm5vbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWF0Y2goL1thLXpBLVowLTldezgsfS8pO1xuICAgICAgICBpZiAoIW5vbmNlIHx8IHRoaXMubm9uY2UubGVuZ3RoIDwgOCB8fCBub25jZVswXSAhPT0gdGhpcy5ub25jZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuU2l3ZUVycm9yKHR5cGVzXzEuU2l3ZUVycm9yVHlwZS5JTlZBTElEX05PTkNFLCBgTGVuZ3RoID4gOCAoJHtub25jZS5sZW5ndGh9KS4gQWxwaGFudW1lcmljLmAsIHRoaXMubm9uY2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBgaXNzdWVkQXRgIGNvbmZvcm1zIHRvIElTTy04NjAxIGFuZCBpcyBhIHZhbGlkIGRhdGUuICovXG4gICAgICAgIGlmICh0aGlzLmlzc3VlZEF0KSB7XG4gICAgICAgICAgICBpZiAoISgwLCB1dGlsc18xLmlzVmFsaWRJU084NjAxRGF0ZSkodGhpcy5pc3N1ZWRBdCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLklOVkFMSURfVElNRV9GT1JNQVQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBgZXhwaXJhdGlvblRpbWVgIGNvbmZvcm1zIHRvIElTTy04NjAxIGFuZCBpcyBhIHZhbGlkIGRhdGUuICovXG4gICAgICAgIGlmICh0aGlzLmV4cGlyYXRpb25UaW1lKSB7XG4gICAgICAgICAgICBpZiAoISgwLCB1dGlsc18xLmlzVmFsaWRJU084NjAxRGF0ZSkodGhpcy5leHBpcmF0aW9uVGltZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLklOVkFMSURfVElNRV9GT1JNQVQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBgbm90QmVmb3JlYCBjb25mb3JtcyB0byBJU08tODYwMSBhbmQgaXMgYSB2YWxpZCBkYXRlLiAqL1xuICAgICAgICBpZiAodGhpcy5ub3RCZWZvcmUpIHtcbiAgICAgICAgICAgIGlmICghKDAsIHV0aWxzXzEuaXNWYWxpZElTTzg2MDFEYXRlKSh0aGlzLm5vdEJlZm9yZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZXNfMS5TaXdlRXJyb3JUeXBlLklOVkFMSURfVElNRV9GT1JNQVQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5TaXdlTWVzc2FnZSA9IFNpd2VNZXNzYWdlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/client.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/ethersCompat.js":
/*!************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/ethersCompat.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getAddress = exports.hashMessage = exports.verifyMessage = void 0;\nconst ethers_1 = __webpack_require__(/*! ethers */ \"(rsc)/../../node_modules/.pnpm/ethers@6.16.0/node_modules/ethers/lib.commonjs/index.js\");\nlet ethersVerifyMessage = null;\nlet ethersHashMessage = null;\nlet ethersGetAddress = null;\ntry {\n    // @ts-expect-error -- v6 compatibility hack\n    ethersVerifyMessage = ethers_1.ethers.utils.verifyMessage;\n    // @ts-expect-error -- v6 compatibility hack\n    ethersHashMessage = ethers_1.ethers.utils.hashMessage;\n    // @ts-expect-error -- v6 compatibility hack\n    ethersGetAddress = ethers_1.ethers.utils.getAddress;\n}\ncatch (_a) {\n    ethersVerifyMessage = ethers_1.ethers.verifyMessage;\n    ethersHashMessage = ethers_1.ethers.hashMessage;\n    ethersGetAddress = ethers_1.ethers.getAddress;\n}\nexports.verifyMessage = ethersVerifyMessage;\nexports.hashMessage = ethersHashMessage;\nexports.getAddress = ethersGetAddress;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L2V0aGVyc0NvbXBhdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsR0FBRyxtQkFBbUIsR0FBRyxxQkFBcUI7QUFDaEUsaUJBQWlCLG1CQUFPLENBQUMsc0dBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsbUJBQW1CO0FBQ25CLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb253YXkvYXV0b21hdG9uLWRhc2hib2FyZC8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc2l3ZUAyLjMuMl9ldGhlcnNANi4xNi4wL25vZGVfbW9kdWxlcy9zaXdlL2Rpc3QvZXRoZXJzQ29tcGF0LmpzPzUxZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEFkZHJlc3MgPSBleHBvcnRzLmhhc2hNZXNzYWdlID0gZXhwb3J0cy52ZXJpZnlNZXNzYWdlID0gdm9pZCAwO1xuY29uc3QgZXRoZXJzXzEgPSByZXF1aXJlKFwiZXRoZXJzXCIpO1xubGV0IGV0aGVyc1ZlcmlmeU1lc3NhZ2UgPSBudWxsO1xubGV0IGV0aGVyc0hhc2hNZXNzYWdlID0gbnVsbDtcbmxldCBldGhlcnNHZXRBZGRyZXNzID0gbnVsbDtcbnRyeSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtLSB2NiBjb21wYXRpYmlsaXR5IGhhY2tcbiAgICBldGhlcnNWZXJpZnlNZXNzYWdlID0gZXRoZXJzXzEuZXRoZXJzLnV0aWxzLnZlcmlmeU1lc3NhZ2U7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtLSB2NiBjb21wYXRpYmlsaXR5IGhhY2tcbiAgICBldGhlcnNIYXNoTWVzc2FnZSA9IGV0aGVyc18xLmV0aGVycy51dGlscy5oYXNoTWVzc2FnZTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0tIHY2IGNvbXBhdGliaWxpdHkgaGFja1xuICAgIGV0aGVyc0dldEFkZHJlc3MgPSBldGhlcnNfMS5ldGhlcnMudXRpbHMuZ2V0QWRkcmVzcztcbn1cbmNhdGNoIChfYSkge1xuICAgIGV0aGVyc1ZlcmlmeU1lc3NhZ2UgPSBldGhlcnNfMS5ldGhlcnMudmVyaWZ5TWVzc2FnZTtcbiAgICBldGhlcnNIYXNoTWVzc2FnZSA9IGV0aGVyc18xLmV0aGVycy5oYXNoTWVzc2FnZTtcbiAgICBldGhlcnNHZXRBZGRyZXNzID0gZXRoZXJzXzEuZXRoZXJzLmdldEFkZHJlc3M7XG59XG5leHBvcnRzLnZlcmlmeU1lc3NhZ2UgPSBldGhlcnNWZXJpZnlNZXNzYWdlO1xuZXhwb3J0cy5oYXNoTWVzc2FnZSA9IGV0aGVyc0hhc2hNZXNzYWdlO1xuZXhwb3J0cy5nZXRBZGRyZXNzID0gZXRoZXJzR2V0QWRkcmVzcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/ethersCompat.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/siwe.js":
/*!****************************************************************************************!*\
  !*** ../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/siwe.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__exportStar(__webpack_require__(/*! ./client */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/client.js\"), exports);\n__exportStar(__webpack_require__(/*! ./types */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./utils */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/utils.js\"), exports);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L3Npd2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsYUFBYSxtQkFBTyxDQUFDLDBHQUFVO0FBQy9CLGFBQWEsbUJBQU8sQ0FBQyx3R0FBUztBQUM5QixhQUFhLG1CQUFPLENBQUMsd0dBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY29ud2F5L2F1dG9tYXRvbi1kYXNoYm9hcmQvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L3Npd2UuanM/OWNiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NsaWVudFwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3V0aWxzXCIpLCBleHBvcnRzKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/siwe.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/types.js":
/*!*****************************************************************************************!*\
  !*** ../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/types.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SiweErrorType = exports.SiweError = exports.VerifyOptsKeys = exports.VerifyParamsKeys = void 0;\nexports.VerifyParamsKeys = [\n    'signature',\n    'scheme',\n    'domain',\n    'nonce',\n    'time',\n];\nexports.VerifyOptsKeys = [\n    'provider',\n    'suppressExceptions',\n    'verificationFallback',\n];\n/**\n * Interface used to return errors in SiweResponses.\n */\nclass SiweError {\n    constructor(type, expected, received) {\n        this.type = type;\n        this.expected = expected;\n        this.received = received;\n    }\n}\nexports.SiweError = SiweError;\n/**\n * Possible message error types.\n */\nvar SiweErrorType;\n(function (SiweErrorType) {\n    /** `expirationTime` is present and in the past. */\n    SiweErrorType[\"EXPIRED_MESSAGE\"] = \"Expired message.\";\n    /** `domain` is not a valid authority or is empty. */\n    SiweErrorType[\"INVALID_DOMAIN\"] = \"Invalid domain.\";\n    /** `scheme` don't match the scheme provided for verification. */\n    SiweErrorType[\"SCHEME_MISMATCH\"] = \"Scheme does not match provided scheme for verification.\";\n    /** `domain` don't match the domain provided for verification. */\n    SiweErrorType[\"DOMAIN_MISMATCH\"] = \"Domain does not match provided domain for verification.\";\n    /** `nonce` don't match the nonce provided for verification. */\n    SiweErrorType[\"NONCE_MISMATCH\"] = \"Nonce does not match provided nonce for verification.\";\n    /** `address` does not conform to EIP-55 or is not a valid address. */\n    SiweErrorType[\"INVALID_ADDRESS\"] = \"Invalid address.\";\n    /** `uri` does not conform to RFC 3986. */\n    SiweErrorType[\"INVALID_URI\"] = \"URI does not conform to RFC 3986.\";\n    /** `nonce` is smaller then 8 characters or is not alphanumeric */\n    SiweErrorType[\"INVALID_NONCE\"] = \"Nonce size smaller then 8 characters or is not alphanumeric.\";\n    /** `notBefore` is present and in the future. */\n    SiweErrorType[\"NOT_YET_VALID_MESSAGE\"] = \"Message is not valid yet.\";\n    /** Signature doesn't match the address of the message. */\n    SiweErrorType[\"INVALID_SIGNATURE\"] = \"Signature does not match address of the message.\";\n    /** `expirationTime`, `notBefore` or `issuedAt` not complient to ISO-8601. */\n    SiweErrorType[\"INVALID_TIME_FORMAT\"] = \"Invalid time format.\";\n    /** `version` is not 1. */\n    SiweErrorType[\"INVALID_MESSAGE_VERSION\"] = \"Invalid message version.\";\n    /** Thrown when some required field is missing. */\n    SiweErrorType[\"UNABLE_TO_PARSE\"] = \"Unable to parse the message.\";\n})(SiweErrorType = exports.SiweErrorType || (exports.SiweErrorType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L3R5cGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQixHQUFHLGlCQUFpQixHQUFHLHNCQUFzQixHQUFHLHdCQUF3QjtBQUM3Rix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRDQUE0QyxxQkFBcUIsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb253YXkvYXV0b21hdG9uLWRhc2hib2FyZC8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc2l3ZUAyLjMuMl9ldGhlcnNANi4xNi4wL25vZGVfbW9kdWxlcy9zaXdlL2Rpc3QvdHlwZXMuanM/MjJlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2l3ZUVycm9yVHlwZSA9IGV4cG9ydHMuU2l3ZUVycm9yID0gZXhwb3J0cy5WZXJpZnlPcHRzS2V5cyA9IGV4cG9ydHMuVmVyaWZ5UGFyYW1zS2V5cyA9IHZvaWQgMDtcbmV4cG9ydHMuVmVyaWZ5UGFyYW1zS2V5cyA9IFtcbiAgICAnc2lnbmF0dXJlJyxcbiAgICAnc2NoZW1lJyxcbiAgICAnZG9tYWluJyxcbiAgICAnbm9uY2UnLFxuICAgICd0aW1lJyxcbl07XG5leHBvcnRzLlZlcmlmeU9wdHNLZXlzID0gW1xuICAgICdwcm92aWRlcicsXG4gICAgJ3N1cHByZXNzRXhjZXB0aW9ucycsXG4gICAgJ3ZlcmlmaWNhdGlvbkZhbGxiYWNrJyxcbl07XG4vKipcbiAqIEludGVyZmFjZSB1c2VkIHRvIHJldHVybiBlcnJvcnMgaW4gU2l3ZVJlc3BvbnNlcy5cbiAqL1xuY2xhc3MgU2l3ZUVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBleHBlY3RlZCwgcmVjZWl2ZWQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5leHBlY3RlZCA9IGV4cGVjdGVkO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID0gcmVjZWl2ZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5TaXdlRXJyb3IgPSBTaXdlRXJyb3I7XG4vKipcbiAqIFBvc3NpYmxlIG1lc3NhZ2UgZXJyb3IgdHlwZXMuXG4gKi9cbnZhciBTaXdlRXJyb3JUeXBlO1xuKGZ1bmN0aW9uIChTaXdlRXJyb3JUeXBlKSB7XG4gICAgLyoqIGBleHBpcmF0aW9uVGltZWAgaXMgcHJlc2VudCBhbmQgaW4gdGhlIHBhc3QuICovXG4gICAgU2l3ZUVycm9yVHlwZVtcIkVYUElSRURfTUVTU0FHRVwiXSA9IFwiRXhwaXJlZCBtZXNzYWdlLlwiO1xuICAgIC8qKiBgZG9tYWluYCBpcyBub3QgYSB2YWxpZCBhdXRob3JpdHkgb3IgaXMgZW1wdHkuICovXG4gICAgU2l3ZUVycm9yVHlwZVtcIklOVkFMSURfRE9NQUlOXCJdID0gXCJJbnZhbGlkIGRvbWFpbi5cIjtcbiAgICAvKiogYHNjaGVtZWAgZG9uJ3QgbWF0Y2ggdGhlIHNjaGVtZSBwcm92aWRlZCBmb3IgdmVyaWZpY2F0aW9uLiAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJTQ0hFTUVfTUlTTUFUQ0hcIl0gPSBcIlNjaGVtZSBkb2VzIG5vdCBtYXRjaCBwcm92aWRlZCBzY2hlbWUgZm9yIHZlcmlmaWNhdGlvbi5cIjtcbiAgICAvKiogYGRvbWFpbmAgZG9uJ3QgbWF0Y2ggdGhlIGRvbWFpbiBwcm92aWRlZCBmb3IgdmVyaWZpY2F0aW9uLiAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJET01BSU5fTUlTTUFUQ0hcIl0gPSBcIkRvbWFpbiBkb2VzIG5vdCBtYXRjaCBwcm92aWRlZCBkb21haW4gZm9yIHZlcmlmaWNhdGlvbi5cIjtcbiAgICAvKiogYG5vbmNlYCBkb24ndCBtYXRjaCB0aGUgbm9uY2UgcHJvdmlkZWQgZm9yIHZlcmlmaWNhdGlvbi4gKi9cbiAgICBTaXdlRXJyb3JUeXBlW1wiTk9OQ0VfTUlTTUFUQ0hcIl0gPSBcIk5vbmNlIGRvZXMgbm90IG1hdGNoIHByb3ZpZGVkIG5vbmNlIGZvciB2ZXJpZmljYXRpb24uXCI7XG4gICAgLyoqIGBhZGRyZXNzYCBkb2VzIG5vdCBjb25mb3JtIHRvIEVJUC01NSBvciBpcyBub3QgYSB2YWxpZCBhZGRyZXNzLiAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJJTlZBTElEX0FERFJFU1NcIl0gPSBcIkludmFsaWQgYWRkcmVzcy5cIjtcbiAgICAvKiogYHVyaWAgZG9lcyBub3QgY29uZm9ybSB0byBSRkMgMzk4Ni4gKi9cbiAgICBTaXdlRXJyb3JUeXBlW1wiSU5WQUxJRF9VUklcIl0gPSBcIlVSSSBkb2VzIG5vdCBjb25mb3JtIHRvIFJGQyAzOTg2LlwiO1xuICAgIC8qKiBgbm9uY2VgIGlzIHNtYWxsZXIgdGhlbiA4IGNoYXJhY3RlcnMgb3IgaXMgbm90IGFscGhhbnVtZXJpYyAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJJTlZBTElEX05PTkNFXCJdID0gXCJOb25jZSBzaXplIHNtYWxsZXIgdGhlbiA4IGNoYXJhY3RlcnMgb3IgaXMgbm90IGFscGhhbnVtZXJpYy5cIjtcbiAgICAvKiogYG5vdEJlZm9yZWAgaXMgcHJlc2VudCBhbmQgaW4gdGhlIGZ1dHVyZS4gKi9cbiAgICBTaXdlRXJyb3JUeXBlW1wiTk9UX1lFVF9WQUxJRF9NRVNTQUdFXCJdID0gXCJNZXNzYWdlIGlzIG5vdCB2YWxpZCB5ZXQuXCI7XG4gICAgLyoqIFNpZ25hdHVyZSBkb2Vzbid0IG1hdGNoIHRoZSBhZGRyZXNzIG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJJTlZBTElEX1NJR05BVFVSRVwiXSA9IFwiU2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoIGFkZHJlc3Mgb2YgdGhlIG1lc3NhZ2UuXCI7XG4gICAgLyoqIGBleHBpcmF0aW9uVGltZWAsIGBub3RCZWZvcmVgIG9yIGBpc3N1ZWRBdGAgbm90IGNvbXBsaWVudCB0byBJU08tODYwMS4gKi9cbiAgICBTaXdlRXJyb3JUeXBlW1wiSU5WQUxJRF9USU1FX0ZPUk1BVFwiXSA9IFwiSW52YWxpZCB0aW1lIGZvcm1hdC5cIjtcbiAgICAvKiogYHZlcnNpb25gIGlzIG5vdCAxLiAqL1xuICAgIFNpd2VFcnJvclR5cGVbXCJJTlZBTElEX01FU1NBR0VfVkVSU0lPTlwiXSA9IFwiSW52YWxpZCBtZXNzYWdlIHZlcnNpb24uXCI7XG4gICAgLyoqIFRocm93biB3aGVuIHNvbWUgcmVxdWlyZWQgZmllbGQgaXMgbWlzc2luZy4gKi9cbiAgICBTaXdlRXJyb3JUeXBlW1wiVU5BQkxFX1RPX1BBUlNFXCJdID0gXCJVbmFibGUgdG8gcGFyc2UgdGhlIG1lc3NhZ2UuXCI7XG59KShTaXdlRXJyb3JUeXBlID0gZXhwb3J0cy5TaXdlRXJyb3JUeXBlIHx8IChleHBvcnRzLlNpd2VFcnJvclR5cGUgPSB7fSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/types.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/utils.js":
/*!*****************************************************************************************!*\
  !*** ../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/utils.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.checkInvalidKeys = exports.isValidISO8601Date = exports.generateNonce = exports.checkContractWalletSignature = void 0;\nconst random_1 = __webpack_require__(/*! @stablelib/random */ \"(rsc)/../../node_modules/.pnpm/@stablelib+random@1.0.2/node_modules/@stablelib/random/lib/random.js\");\n// @ts-expect-error -- ethers v6 compatibility hack\nconst ethers_1 = __webpack_require__(/*! ethers */ \"(rsc)/../../node_modules/.pnpm/ethers@6.16.0/node_modules/ethers/lib.commonjs/index.js\");\nconst ethersCompat_1 = __webpack_require__(/*! ./ethersCompat */ \"(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/ethersCompat.js\");\nconst EIP1271_ABI = [\n    'function isValidSignature(bytes32 _message, bytes _signature) public view returns (bytes4)',\n];\nconst EIP1271_MAGICVALUE = '0x1626ba7e';\nconst ISO8601 = /^(?<date>[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/;\n/**\n * This method calls the EIP-1271 method for Smart Contract wallets\n * @param message The EIP-4361 parsed message\n * @param provider Web3 provider able to perform a contract check (Web3/EthersJS).\n * @returns {Promise<boolean>} Checks for the smart contract (if it exists) if\n * the signature is valid for given address.\n */\nconst checkContractWalletSignature = (message, signature, provider) => __awaiter(void 0, void 0, void 0, function* () {\n    if (!provider) {\n        return false;\n    }\n    const walletContract = new ethers_1.Contract(message.address, EIP1271_ABI, provider);\n    const hashedMessage = (0, ethersCompat_1.hashMessage)(message.prepareMessage());\n    const res = yield walletContract.isValidSignature(hashedMessage, signature);\n    return res === EIP1271_MAGICVALUE;\n});\nexports.checkContractWalletSignature = checkContractWalletSignature;\n/**\n * This method leverages a native CSPRNG with support for both browser and Node.js\n * environments in order generate a cryptographically secure nonce for use in the\n * SiweMessage in order to prevent replay attacks.\n *\n * 96 bits has been chosen as a number to sufficiently balance size and security considerations\n * relative to the lifespan of it's usage.\n *\n * @returns cryptographically generated random nonce with 96 bits of entropy encoded with\n * an alphanumeric character set.\n */\nconst generateNonce = () => {\n    const nonce = (0, random_1.randomStringForEntropy)(96);\n    if (!nonce || nonce.length < 8) {\n        throw new Error('Error during nonce creation.');\n    }\n    return nonce;\n};\nexports.generateNonce = generateNonce;\n/**\n * This method matches the given date string against the ISO-8601 regex and also\n * performs checks if it's a valid date.\n * @param inputDate any string to be validated against ISO-8601\n * @returns boolean indicating if the providade date is valid and conformant to ISO-8601\n */\nconst isValidISO8601Date = (inputDate) => {\n    /* Split groups and make sure inputDate is in ISO8601 format */\n    const inputMatch = ISO8601.exec(inputDate);\n    /* if inputMatch is null the date is not ISO-8601 */\n    if (!inputDate) {\n        return false;\n    }\n    /* Creates a date object with input date to parse for invalid days e.g. Feb, 30 -> Mar, 01 */\n    const inputDateParsed = new Date(inputMatch.groups.date).toISOString();\n    /* Get groups from new parsed date to compare with the original input */\n    const parsedInputMatch = ISO8601.exec(inputDateParsed);\n    /* Compare remaining fields */\n    return inputMatch.groups.date === parsedInputMatch.groups.date;\n};\nexports.isValidISO8601Date = isValidISO8601Date;\nconst checkInvalidKeys = (obj, keys) => {\n    const invalidKeys = [];\n    Object.keys(obj).forEach(key => {\n        if (!keys.includes(key)) {\n            invalidKeys.push(key);\n        }\n    });\n    return invalidKeys;\n};\nexports.checkInvalidKeys = checkInvalidKeys;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L3V0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx3QkFBd0IsR0FBRywwQkFBMEIsR0FBRyxxQkFBcUIsR0FBRyxvQ0FBb0M7QUFDcEgsaUJBQWlCLG1CQUFPLENBQUMsOEhBQW1CO0FBQzVDO0FBQ0EsaUJBQWlCLG1CQUFPLENBQUMsc0dBQVE7QUFDakMsdUJBQXVCLG1CQUFPLENBQUMsc0hBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLEVBQUU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3QkFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY29ud2F5L2F1dG9tYXRvbi1kYXNoYm9hcmQvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Npd2VAMi4zLjJfZXRoZXJzQDYuMTYuMC9ub2RlX21vZHVsZXMvc2l3ZS9kaXN0L3V0aWxzLmpzPzNjZDgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2hlY2tJbnZhbGlkS2V5cyA9IGV4cG9ydHMuaXNWYWxpZElTTzg2MDFEYXRlID0gZXhwb3J0cy5nZW5lcmF0ZU5vbmNlID0gZXhwb3J0cy5jaGVja0NvbnRyYWN0V2FsbGV0U2lnbmF0dXJlID0gdm9pZCAwO1xuY29uc3QgcmFuZG9tXzEgPSByZXF1aXJlKFwiQHN0YWJsZWxpYi9yYW5kb21cIik7XG4vLyBAdHMtZXhwZWN0LWVycm9yIC0tIGV0aGVycyB2NiBjb21wYXRpYmlsaXR5IGhhY2tcbmNvbnN0IGV0aGVyc18xID0gcmVxdWlyZShcImV0aGVyc1wiKTtcbmNvbnN0IGV0aGVyc0NvbXBhdF8xID0gcmVxdWlyZShcIi4vZXRoZXJzQ29tcGF0XCIpO1xuY29uc3QgRUlQMTI3MV9BQkkgPSBbXG4gICAgJ2Z1bmN0aW9uIGlzVmFsaWRTaWduYXR1cmUoYnl0ZXMzMiBfbWVzc2FnZSwgYnl0ZXMgX3NpZ25hdHVyZSkgcHVibGljIHZpZXcgcmV0dXJucyAoYnl0ZXM0KScsXG5dO1xuY29uc3QgRUlQMTI3MV9NQUdJQ1ZBTFVFID0gJzB4MTYyNmJhN2UnO1xuY29uc3QgSVNPODYwMSA9IC9eKD88ZGF0ZT5bMC05XXs0fS0oMFsxLTldfDFbMDEyXSktKDBbMS05XXxbMTJdWzAtOV18M1swMV0pKVtUdF0oWzAxXVswLTldfDJbMC0zXSk6KFswLTVdWzAtOV0pOihbMC01XVswLTldfDYwKSguWzAtOV0rKT8oKFtael0pfChbK3wtXShbMDFdWzAtOV18MlswLTNdKTpbMC01XVswLTldKSkkLztcbi8qKlxuICogVGhpcyBtZXRob2QgY2FsbHMgdGhlIEVJUC0xMjcxIG1ldGhvZCBmb3IgU21hcnQgQ29udHJhY3Qgd2FsbGV0c1xuICogQHBhcmFtIG1lc3NhZ2UgVGhlIEVJUC00MzYxIHBhcnNlZCBtZXNzYWdlXG4gKiBAcGFyYW0gcHJvdmlkZXIgV2ViMyBwcm92aWRlciBhYmxlIHRvIHBlcmZvcm0gYSBjb250cmFjdCBjaGVjayAoV2ViMy9FdGhlcnNKUykuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gQ2hlY2tzIGZvciB0aGUgc21hcnQgY29udHJhY3QgKGlmIGl0IGV4aXN0cykgaWZcbiAqIHRoZSBzaWduYXR1cmUgaXMgdmFsaWQgZm9yIGdpdmVuIGFkZHJlc3MuXG4gKi9cbmNvbnN0IGNoZWNrQ29udHJhY3RXYWxsZXRTaWduYXR1cmUgPSAobWVzc2FnZSwgc2lnbmF0dXJlLCBwcm92aWRlcikgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHdhbGxldENvbnRyYWN0ID0gbmV3IGV0aGVyc18xLkNvbnRyYWN0KG1lc3NhZ2UuYWRkcmVzcywgRUlQMTI3MV9BQkksIHByb3ZpZGVyKTtcbiAgICBjb25zdCBoYXNoZWRNZXNzYWdlID0gKDAsIGV0aGVyc0NvbXBhdF8xLmhhc2hNZXNzYWdlKShtZXNzYWdlLnByZXBhcmVNZXNzYWdlKCkpO1xuICAgIGNvbnN0IHJlcyA9IHlpZWxkIHdhbGxldENvbnRyYWN0LmlzVmFsaWRTaWduYXR1cmUoaGFzaGVkTWVzc2FnZSwgc2lnbmF0dXJlKTtcbiAgICByZXR1cm4gcmVzID09PSBFSVAxMjcxX01BR0lDVkFMVUU7XG59KTtcbmV4cG9ydHMuY2hlY2tDb250cmFjdFdhbGxldFNpZ25hdHVyZSA9IGNoZWNrQ29udHJhY3RXYWxsZXRTaWduYXR1cmU7XG4vKipcbiAqIFRoaXMgbWV0aG9kIGxldmVyYWdlcyBhIG5hdGl2ZSBDU1BSTkcgd2l0aCBzdXBwb3J0IGZvciBib3RoIGJyb3dzZXIgYW5kIE5vZGUuanNcbiAqIGVudmlyb25tZW50cyBpbiBvcmRlciBnZW5lcmF0ZSBhIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBub25jZSBmb3IgdXNlIGluIHRoZVxuICogU2l3ZU1lc3NhZ2UgaW4gb3JkZXIgdG8gcHJldmVudCByZXBsYXkgYXR0YWNrcy5cbiAqXG4gKiA5NiBiaXRzIGhhcyBiZWVuIGNob3NlbiBhcyBhIG51bWJlciB0byBzdWZmaWNpZW50bHkgYmFsYW5jZSBzaXplIGFuZCBzZWN1cml0eSBjb25zaWRlcmF0aW9uc1xuICogcmVsYXRpdmUgdG8gdGhlIGxpZmVzcGFuIG9mIGl0J3MgdXNhZ2UuXG4gKlxuICogQHJldHVybnMgY3J5cHRvZ3JhcGhpY2FsbHkgZ2VuZXJhdGVkIHJhbmRvbSBub25jZSB3aXRoIDk2IGJpdHMgb2YgZW50cm9weSBlbmNvZGVkIHdpdGhcbiAqIGFuIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXIgc2V0LlxuICovXG5jb25zdCBnZW5lcmF0ZU5vbmNlID0gKCkgPT4ge1xuICAgIGNvbnN0IG5vbmNlID0gKDAsIHJhbmRvbV8xLnJhbmRvbVN0cmluZ0ZvckVudHJvcHkpKDk2KTtcbiAgICBpZiAoIW5vbmNlIHx8IG5vbmNlLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBkdXJpbmcgbm9uY2UgY3JlYXRpb24uJyk7XG4gICAgfVxuICAgIHJldHVybiBub25jZTtcbn07XG5leHBvcnRzLmdlbmVyYXRlTm9uY2UgPSBnZW5lcmF0ZU5vbmNlO1xuLyoqXG4gKiBUaGlzIG1ldGhvZCBtYXRjaGVzIHRoZSBnaXZlbiBkYXRlIHN0cmluZyBhZ2FpbnN0IHRoZSBJU08tODYwMSByZWdleCBhbmQgYWxzb1xuICogcGVyZm9ybXMgY2hlY2tzIGlmIGl0J3MgYSB2YWxpZCBkYXRlLlxuICogQHBhcmFtIGlucHV0RGF0ZSBhbnkgc3RyaW5nIHRvIGJlIHZhbGlkYXRlZCBhZ2FpbnN0IElTTy04NjAxXG4gKiBAcmV0dXJucyBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIHByb3ZpZGFkZSBkYXRlIGlzIHZhbGlkIGFuZCBjb25mb3JtYW50IHRvIElTTy04NjAxXG4gKi9cbmNvbnN0IGlzVmFsaWRJU084NjAxRGF0ZSA9IChpbnB1dERhdGUpID0+IHtcbiAgICAvKiBTcGxpdCBncm91cHMgYW5kIG1ha2Ugc3VyZSBpbnB1dERhdGUgaXMgaW4gSVNPODYwMSBmb3JtYXQgKi9cbiAgICBjb25zdCBpbnB1dE1hdGNoID0gSVNPODYwMS5leGVjKGlucHV0RGF0ZSk7XG4gICAgLyogaWYgaW5wdXRNYXRjaCBpcyBudWxsIHRoZSBkYXRlIGlzIG5vdCBJU08tODYwMSAqL1xuICAgIGlmICghaW5wdXREYXRlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyogQ3JlYXRlcyBhIGRhdGUgb2JqZWN0IHdpdGggaW5wdXQgZGF0ZSB0byBwYXJzZSBmb3IgaW52YWxpZCBkYXlzIGUuZy4gRmViLCAzMCAtPiBNYXIsIDAxICovXG4gICAgY29uc3QgaW5wdXREYXRlUGFyc2VkID0gbmV3IERhdGUoaW5wdXRNYXRjaC5ncm91cHMuZGF0ZSkudG9JU09TdHJpbmcoKTtcbiAgICAvKiBHZXQgZ3JvdXBzIGZyb20gbmV3IHBhcnNlZCBkYXRlIHRvIGNvbXBhcmUgd2l0aCB0aGUgb3JpZ2luYWwgaW5wdXQgKi9cbiAgICBjb25zdCBwYXJzZWRJbnB1dE1hdGNoID0gSVNPODYwMS5leGVjKGlucHV0RGF0ZVBhcnNlZCk7XG4gICAgLyogQ29tcGFyZSByZW1haW5pbmcgZmllbGRzICovXG4gICAgcmV0dXJuIGlucHV0TWF0Y2guZ3JvdXBzLmRhdGUgPT09IHBhcnNlZElucHV0TWF0Y2guZ3JvdXBzLmRhdGU7XG59O1xuZXhwb3J0cy5pc1ZhbGlkSVNPODYwMURhdGUgPSBpc1ZhbGlkSVNPODYwMURhdGU7XG5jb25zdCBjaGVja0ludmFsaWRLZXlzID0gKG9iaiwga2V5cykgPT4ge1xuICAgIGNvbnN0IGludmFsaWRLZXlzID0gW107XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICgha2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICBpbnZhbGlkS2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaW52YWxpZEtleXM7XG59O1xuZXhwb3J0cy5jaGVja0ludmFsaWRLZXlzID0gY2hlY2tJbnZhbGlkS2V5cztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/siwe@2.3.2_ethers@6.16.0/node_modules/siwe/dist/utils.js\n");

/***/ })

};
;